{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n \n\nasync function searchImages(url) {\n  try {\n    const { data } = await axios(url)\n    console.log(data);\n  \n    if (data.hits.length === 0) {\n      iziToast.show({\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n      });\n      return null;\n    } else {\n      return data;\n    }\n  }  \n  catch (error) {\n    console.log('Fetch error:', error);\n    return null;\n    };\n}\n\nexport { searchImages }\n","function imageTemplate(image) {\n    return `<li class=\"gallery-item\">\n               <div class=\"gallery-image-container\">\n                   <a class=\"gallery-link\" href=${image.largeImageURL}>\n                     <img\n                       class=\"gallery-image\"\n                       src=${image.webformatURL} \n                       alt=${image.tags} />\n                   </a>\n               </div>\n               <div class=\"property-container\">\n                 <div class=\"property\">\n                   Likes\n                   <span class=\"keys\">${image.likes}</span>\n                 </div>\n\t             <div class =\"property\">\n                   Views\n                   <span class=\"keys\">${image.views}</span>\n                 </div>\n\t             <div class =\"property\">\n                   Comments\n                   <span class=\"keys\">${image.comments}</span>\n                 </div>\n\t             <div class =\"property\">\n                   Downloads\n                   <span class=\"keys\">${image.downloads}</span>\n                 </div>\n               </div>    \n          </li>`;\n}\n\nfunction imagesTemplate(arr) {\n    return arr.map(imageTemplate).join('');\n}\n\nexport { imagesTemplate }","import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImages } from \"./js/pixabay-api\";\nimport { imagesTemplate } from \"./js/render-functions\";\n\nconst form = document.querySelector('.images-form');\nconst imagesList = document.querySelector('.images-container');\nconst request = document.querySelector('.images-form-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector(\".load-more\");\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\n\nform.addEventListener('submit', handleSubmit);\nloadMore.addEventListener(\"click\", onLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n    if (request.value.trim() === '') {      \n      return; \n  }\n     \n  query = event.target.elements.query.value.trim();\n  page = 1;\n  form.reset();\n  gallery.innerHTML = '';\n  loadMore.classList.add('load-more-hidden');\n  loader.style.display = 'block';\n  try {\n    const data = await searchImages(getUrl(query, page));\n    if (data) {\n        totalHits = data.totalHits;\n        const markup = imagesTemplate(data.hits);\n        gallery.innerHTML = markup;      \n        lightbox.refresh();\n      if (totalHits > 15) {\n        loadMore.classList.remove('load-more-hidden');\n      }\n      scrollCard();\n    }\n  } catch (error) {\n      console.log(error);\n      \n  } finally {\n    loader.style.display = 'none';\n  }\n   \n};\n\nasync function onLoadMore() {\n    page += 1;\n    loadMore.disabled = true;\n\n    try {\n        const data = await searchImages(getUrl(query, page));\n        if (data) {\n          const markup = imagesTemplate(data.hits);\n          gallery.insertAdjacentHTML(\"beforeend\", markup);\n          lightbox.refresh();\n          if (page * 15 >= totalHits) {\n            loadMore.classList.add('load-more-hidden');\n            iziToast.show({\n              position: 'topRight',\n              backgroundColor: '#EF4040',\n              message: \"We're sorry, but you've reached the end of search results.\",\n              messageColor: '#FAFAFB',\n            });\n          }\n          scrollCard();\n        }\n    } catch (error) {\n      console.log(error);\n    } finally {\n    loadMore.disabled = false;\n    }\n}\n\nfunction getUrl(query, page) {\n  const baseUrl = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '44020863-07a417a47184dc9fb21f180f5',\n    q: query,\n    lang: 'en',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n  return `${baseUrl}?${params}`;\n}\n\nfunction scrollCard() {\n  const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        })  \n}\n\n\nlet lightbox = new SimpleLightbox('.gallery-image-container a', {\n        captionsData: 'alt',\n        captionDelay: 250\n});\n      \n"],"names":["searchImages","url","data","axios","iziToast","error","imageTemplate","image","imagesTemplate","arr","form","request","gallery","loader","loadMore","page","query","totalHits","handleSubmit","onLoadMore","event","getUrl","markup","lightbox","scrollCard","baseUrl","params","cardHeight","SimpleLightbox"],"mappings":"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"}